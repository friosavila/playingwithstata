<!DOCTYPE html>
<html lang="en"><head>
<script src="SC_files/libs/clipboard/clipboard.min.js"></script>
<script src="SC_files/libs/quarto-html/tabby.min.js"></script>
<script src="SC_files/libs/quarto-html/popper.min.js"></script>
<script src="SC_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="SC_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SC_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="SC_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="SC_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.313">

  <meta name="author" content="Fernando Rios-Avila">
  <title>Synthetic Control</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="SC_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="SC_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="SC_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="SC_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="SC_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="SC_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="SC_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Synthetic Control</h1>
  <p class="subtitle">Frankensteining a Clone</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Fernando Rios-Avila 
</div>
</div>
</div>

</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<ul>
<li>One more last time. What is the Goal of Causal Analysis?</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><strong>The goal of Causal Analysis is to identify how a treatment affects the outcome by itself, once all other factors are kept constant or controlled for.</strong></p>
</div>
</div>
</div>
<p>From a theoretical point of view, that is very easy. You simply compare two Potential outcomes:</p>
<p><span class="math display">\[
TE_i = y_i(1)- y_i(0)
\]</span></p>
<p>and aggregate those outcomes as needed:</p>
<p><span class="math display">\[
ATT=E(TE_i|D=1);ATU=E(TE_i|D=0);ATE=E(TE_i);ATX=E(TE_i|X)
\]</span></p>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p>Unfortunately, we only observe one outcome. You are either treated or untreated…So how do we fix this?</p>
<p>You need to find counterfactuals so both observed (<span class="math inline">\(X\)</span>) and unobserved (<span class="math inline">\(e\)</span>) are the same (or close) between treated and contro group.</p>
<ol type="1">
<li><p><strong>RCT</strong>: Gold Standard, You randomize treatment and compare means. If correctly done, <span class="math inline">\(X's\)</span> and <span class="math inline">\(e's\)</span> will be comparable across groups, and ATE’s can be identified.</p></li>
<li><p><strong>Reg + FE</strong>: For other cases, we just work with observational data. First method, Regression (OLS?). Adding covariates controls for their presence, working as a pseudo balancing approach.</p>
<p>You could also add <em>fixed effects</em>, to control for factors that are fixed (across time), but you do not observe. (requires Panel data).</p>
<p>It works if Treatment occurs at the same time for everyone treated. and if Unobserved are “fixed”</p></li>
</ol>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<ol start="3" type="1">
<li><p><strong>Instrumental variables</strong>: 2nd Best to RCT. It uses IV to generate a small randomization process that can be used for estimating ATT. Technically it compares the effect among those potentially affected by the random instrument. Requires Randome instrument, and no-defiers. Its a Local ATE</p></li>
<li><p><strong>Matching and Reweigthing</strong>. Similar to Regression, but better to balance characteristics. The goal is to find units with similar characteristics for all treated units. You can estimate ATE, ATT or ATU. Depends on how well Matching is done</p></li>
<li><p><strong>RDD</strong>. If you have data where treatment depends on a single variable and a threshold, you can use this to identify TE for those “Near” the threshold. They Key assumption, treatment assigment is as good at random at the threshold.</p></li>
</ol>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<ol start="6" type="1">
<li><p><strong>DD</strong>. Differences in differences uses variation across time and across individual to identify treatment effects. Under PTA, and SUTVA</p>
<p>Dif. within individuals eliminates common time trends, Dif across time, eliminates individual fixed effects. DD provide you with ATT’s for the treated, after treatment.</p>
<p><span class="math display">\[ATT=(Y_{g=1,t=1}-Y_{g=1,t=0}) - [(Y_{g=0,t=1}-Y_{g=0,t=0})]\]</span></p>
<p>Can be generalized to Many periods and many groups, but requires stronger assumptions (no anticipation and no change in treatment status), and further aggregation.</p>
<p>Or combined with Matching for even better results.</p></li>
</ol>
</section>
<section id="synthetic-control-special-case" class="slide level2">
<h2>Synthetic Control: Special case</h2>
<p>As previous Cases, Synthetic control aims to identify treatment constructing appropriate “counterfactuals”.</p>
<p>It is said that Synthethic controls may be even MORE credible methodology, because the treated group is by construction Exogenous…but how?</p>
<blockquote>
<p>The treated group is a Case Study.</p>
<p>An isolated event or unit that is affected by a treatment, and should not affect other units !</p>
</blockquote>
<p>In this sense, the treatment is exogenous, because it affected a single unit.</p>
<p>But what about the counterfactual?</p>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<ul>
<li><p>In other methods (in particular Matching), our “conterfactual” mean to look for observations that had the same characteristics as the treated observation.</p></li>
<li><p>Some times, we needed to settle to use a single “bad” control, because we couldnt find one better. (people are very different).</p>
<ul>
<li>Using Stricter criteria would make it unfeasible.</li>
<li>More relax and we have lots of biases.</li>
</ul></li>
<li><p><strong>SC</strong> is different. You have <strong>MANY</strong> controls, so why settle with only one?</p></li>
<li><p><strong>SC</strong> is like Dr Frankenstein, where you “build” a single comparison group by averaging information of all controls.</p></li>
<li><p>You build the synthetic control getting “weighted averages”.</p></li>
<li><p>But…we assume you can see all units across time (panel data)</p></li>
</ul>
</section>
<section id="this-is-a-very-popular-method" class="slide level2">
<h2>This is a very popular method</h2>
<p>Where has this method been used:</p>
<ul>
<li>effects of right-to-carry laws (Donohue et al., 2019),</li>
<li>legalized prostitution (Cunningham and Shah, 2018),</li>
<li>immigration policy (Bohn et al., 2014),</li>
<li>corporate political connections (Acemoglu et al., 2016),</li>
<li>taxation (Kleven et al., 2013),</li>
<li>organized crime (Pinotti, 2015)</li>
</ul>
<p>Just to name a few.</p>
</section>
<section id="assumptions" class="slide level2">
<h2>Assumptions:</h2>
<ol type="1">
<li><p>The Donor Pool should be a good match for the treated unit. Thus, the synthethic control should be Zero before treatment.</p>
<ul>
<li>This is similar to PTA, but stronger. Before treatment, there should be no difference between Treated and synthetic control</li>
</ul></li>
<li><p>SUTVA. Only the treated group is affected by treatment. The control group should be unaffected (no spill over effects).</p></li>
<li><p>There should be NO other “event” in the period of analysis. (Thus we only capture treatment impact)</p></li>
</ol>
</section>
<section id="how-does-it-work." class="slide level2">
<h2>How does it work.</h2>
<p>Recall, we want to estimate TE for the single untreated unit:</p>
<p><span class="math display">\[ATT_{1t} = Y_{1t}- Y(0)_{1t}
\]</span></p>
<p>but we do not observe <span class="math inline">\(Y(0)_{1t}\)</span>. We only know that before treatment</p>
<p><span class="math display">\[ATT_{1t} = Y_{1t}- Y(0)_{1t}=0\]</span></p>
<p>We could construct a synthetic control:</p>
<p><span class="math display">\[\hat Y_{1t}(0) = \sum_{i = 2}^N w_i Y_{it}
\]</span></p>
<p>At the very least, the weights <span class="math inline">\(w\)</span> should be such that before treatment (<span class="math inline">\(G\)</span>):</p>
<p><span class="math display">\[Y_{1t} = \sum_{i \neq 1} w_i Y_{it} \ \forall \ t&lt;G \]</span></p>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<p>At the very least, the weights <span class="math inline">\(w\)</span> should be such that before treatment (<span class="math inline">\(G\)</span>):</p>
<p><span class="math display">\[Y_{1t} = \sum_{i \neq 1} w_i Y_{it} \ \forall \ t&lt;G \]</span></p>
<p>Havent we seen seen something like this Before? OLS:</p>
<p><span class="math display">\[y = x\beta + e\]</span> <span class="math display">\[y^t_{1} = \color{red}{a_0} +  y_i^t w + e\]</span></p>
<p><span class="math display">\[
\begin{bmatrix}
y^1_1 \\ y^1_2 \\ ... \\ y^1_{G-1} \\
\end{bmatrix} = \color{red}{a_0} +
\begin{bmatrix}
y^2_1 &amp; y^3_1 &amp; ... &amp; y^k_1  \\
y^2_2 &amp; y^3_2 &amp; ... &amp; y^k_2 \\
...  &amp; ... &amp; ... &amp; ...\\
y^2_{G-1} &amp; y^3_{G-1} &amp; ... &amp; y^k_{G-1}\\
\end{bmatrix}
\begin{bmatrix}
w_2 \\ w_3 \\ ... \\ w_k
\end{bmatrix}
+ e
\]</span></p>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<p><span class="math display">\[y^t_{1} = \color{red}{a_0} +  y_i^t w + e\]</span></p>
<ul>
<li>In this Specification, each row (observation) is a “pre-treatment” period of observed data.</li>
<li>and each control unit (from the many controls) will be a variable.</li>
</ul>
<p>OLS can help you find the weights, which can then be used for obtaining the “Synthetic” control</p>
</section>
<section id="small-example" class="slide level2">
<h2>Small Example</h2>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">qui</span>:frause smoking, <span class="kw">clear</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>color_style tableau</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">bysort</span> <span class="fu">year</span>:<span class="kw">egen</span> mean_cig=<span class="kw">mean</span>(cigsale) <span class="kw">if</span> state!=3</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">two</span> (<span class="kw">line</span> cigsale <span class="fu">year</span> <span class="kw">if</span> state ==3) (<span class="kw">line</span> mean_cig <span class="fu">year</span> <span class="kw">if</span> state==1), <span class="co">///</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"California"</span> 2 <span class="st">"Avg Other States"</span>) pos(6) col(2)) <span class="bn">xline</span>(1988)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(31 missing values generated)</code></pre>
</div>

</div>
<img data-src="SC_files/figure-revealjs/cell-2-output-2.png" class="r-stretch"></section>
<section id="section-6" class="slide level2">
<h2></h2>
<ul>
<li>Now we have…38 variables, (other States but California)</li>
<li>And 31 periods (only 19 Before treatment)</li>
<li>Can we estimate the weights using OLS?</li>
</ul>
<p>…</p>
<ul>
<li>Nop. N&lt;K !</li>
</ul>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">qui</span>:<span class="kw">reg</span> mcigsale cigsale* <span class="kw">if</span> <span class="fu">year</span>&lt;=1988, <span class="kw">nocons</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">predict</span> mcigh1</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">qui</span>: lasso linear  mcigsale cig* <span class="kw">if</span> <span class="fu">year</span>&lt;=1988, <span class="kw">nocons</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="kw">predict</span> mcigh2</span>
<span id="cb3-5"><a href="#cb3-5"></a> <span class="kw">two</span> (<span class="kw">line</span> mcigsale <span class="fu">year</span>, lw(0.5)  ) <span class="co">///</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  (<span class="kw">line</span> mcigh1 mcigh2   <span class="fu">year</span>, lw(0.5)  ) , <span class="co">///</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"California"</span> 2 <span class="st">"OLS Synthetic"</span> 3 <span class="st">"LASSO Synthetic"</span>)) <span class="bn">xline</span>(1988)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(option xb assumed; fitted values)
(options xb penalized assumed; linear prediction with penalized coefficients)</code></pre>
</div>

</div>
<img data-src="SC_files/figure-revealjs/cell-4-output-2.png" class="r-stretch"><ul>
<li>OLS Not appropriate (specially if N&lt;K)</li>
<li>Lasso Better, because of regularization, but not great.</li>
<li>We are not controlling for other factors either (controls)</li>
<li>Other Details we cover next</li>
</ul>
</section>
<section id="allowing-for-covariates" class="slide level2">
<h2>Allowing for Covariates:</h2>
<ul>
<li>As with other methodologies, one should also considered controlling for covariates.</li>
<li>Specifically, more covariates can be allowed by Stacking them:</li>
</ul>
<p><span class="math display">\[\begin{bmatrix} y^t_{1} \\ x^t_{1} \\ z^t_{1} \end{bmatrix}
= \color{red}{(a_0=0)} +
\begin{bmatrix} y^t_{2} &amp; y^t_{3} ... &amp; y^t_{k} \\
                x^t_{2} &amp; x^t_{3} ... &amp; x^t_{k} \\
                z^t_{2} &amp; z^t_{3} ... &amp; z^t_{k} \end{bmatrix}
\begin{bmatrix} w_2 \\ w_3 \\ ... \\ w_k \end{bmatrix}
+ e
\]</span></p>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">qui</span>:frause smoking, <span class="kw">clear</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">ren</span> (cigsale lnincome beer age15to24 retprice) <span class="co">///</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>      (var1    var2     var3 var4      var5)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="kw">qui</span>: <span class="kw">reshape</span> <span class="kw">long</span> <span class="kw">var</span>, i(state <span class="fu">year</span>)    j(<span class="kw">new</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw">qui</span>: <span class="kw">reshape</span> <span class="kw">wide</span> <span class="kw">var</span>, i(<span class="fu">year</span> <span class="kw">new</span>)  j(state)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="kw">label</span> <span class="kw">define</span> <span class="kw">new</span> 1 <span class="st">"cigsale"</span> <span class="co">///</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>                 2 <span class="st">"lnincome"</span> <span class="co">///</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>                 3 <span class="st">"beer"</span> <span class="co">///</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>                 4 <span class="st">"age15to24"</span> <span class="co">/// </span></span>
<span id="cb5-10"><a href="#cb5-10"></a>                 5 <span class="st">"retprice"</span>, modify</span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="kw">label</span> <span class="kw">values</span> <span class="kw">new</span> <span class="kw">new</span>    </span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="kw">ren</span> var3 cal_out</span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="kw">qui</span>:<span class="kw">reg</span> cal_out <span class="kw">var</span>* <span class="kw">if</span> <span class="fu">year</span>&lt;=1988, <span class="kw">nocons</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="kw">predict</span> mcigh1</span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="kw">qui</span>: lasso linear   cal_out <span class="kw">var</span>* <span class="kw">if</span> <span class="fu">year</span>&lt;=1988, <span class="kw">nocons</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="kw">predict</span> mcigh2</span>
<span id="cb5-17"><a href="#cb5-17"></a> <span class="kw">two</span> (<span class="kw">line</span> cal_out <span class="fu">year</span> <span class="kw">if</span> <span class="kw">new</span>==1, lw(0.5)  ) <span class="co">///</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>  (<span class="kw">line</span> mcigh1 mcigh2   <span class="fu">year</span> <span class="kw">if</span> <span class="kw">new</span>==1, lw(0.5)  ) , <span class="co">///</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>  <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"California"</span> 2 <span class="st">"OLS Synthetic"</span> 3 <span class="st">"LASSO Synthetic"</span>)) <span class="bn">xline</span>(1988)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(option xb assumed; fitted values)
(32 missing values generated)
(options xb penalized assumed; linear prediction with penalized coefficients)</code></pre>
</div>

</div>
<img data-src="SC_files/figure-revealjs/cell-5-output-2.png" class="r-stretch"></section>
<section id="what-else-to-keep-in-mind" class="slide level2">
<h2>What else to keep in mind</h2>
<ul>
<li>With More Variables, the goal is still to be able to choose <span class="math inline">\(w's\)</span> that best explain the observed outcomes (and characteristics) of the “treated unit”.</li>
</ul>
<p><span class="math display">\[w = \min_w \sum_{m=1}^K \left[ v_m \left( X_{1t}-\sum_{j=2}^J w_j X_{jt}  \right)^2 \right]
\]</span></p>
<p>However, we also need to impose restrictions on Weights:</p>
<ol type="1">
<li><span class="math inline">\(w_j \geq 0\)</span> Weights cannot be negative.</li>
<li><span class="math inline">\(\sum w_j =1\)</span> They should sum up to 1.</li>
<li><span class="math inline">\(v_m\)</span> can be used to increase, or reduce the relative importance of factors in the model. (lower bound at 0) The constant is zero.</li>
</ol>
<p>This is a maximization problem with constrains. Restrictions ensure the prediction is based on a “convex” set, avoiding extrapolation.</p>
</section>
<section id="is-it-noise-or-causal" class="slide level2">
<h2>Is it noise? or Causal?</h2>
<ul>
<li><p>When using <strong>SC</strong>, you essentially have a sample <span class="math inline">\(n=1\)</span> to estimate an effect. How do you know that effect is significant? and not just noise?</p>
<ul>
<li>You can do a randomization experiment! and answer:</li>
</ul></li>
</ul>
<blockquote>
<p>“how unusual is this estimate under the null hypothesis of no policy effect?”.</p>
</blockquote>
<ul>
<li>How does this work?</li>
</ul>
</section>
<section id="randomization" class="slide level2">
<h2>Randomization</h2>
<ol type="1">
<li><p>Excluding the treated unit, estimate the pseudo effect of every other unit in the dataset. These are placebos, and you should expect the effect to be zero for them…but you may see some positive and negative effects.</p>
<ul>
<li>This may be consider the sampling distribution of the estimated effect.</li>
</ul></li>
<li><p>Calculate the pre- and post- treament <em>Root mean squared prediction error</em> for all units (treated and placebos).</p>
<ul>
<li>Pre-RMSPE provides a statistic of how well the model fits before treatment.</li>
<li>Post-RMSPE provides a statistic of how unusual is the outcome after the “treatment date”. The largest it is, the more unpredictable (or stronger treatment effect) it would be.</li>
</ul></li>
</ol>
</section>
<section id="section-9" class="slide level2">
<h2></h2>
<p><span class="math display">\[
  \begin{aligned}
  RMSPE_i^{pre} &amp;= \sqrt{ \frac{1}{g-1}\sum_{t=1}^{g-1}(y_{i,t}-\sum_{j\neq i}w_j^i y_{j,t})^2 } \\
  RMSPE_i^{post} &amp;= \sqrt{ \frac{1}{T-g+1}\sum_{t=g}^{T}(y_{i,t}-\sum_{j\neq i}w_j^i y_{j,t})^2 }
  \end{aligned}
  \]</span></p>
<ol start="3" type="1">
<li><p>Estimate the ratio between Pre and Post RMSPE, and rank them. <span class="math display">\[Ratio_i = \frac{RMSPE_i^{post}}{RMSPE_i^{pre}}
\]</span></p></li>
<li><p>The p-value for the treatment is proportional to the Rank:</p>
<p><span class="math display">\[pvalue_i = \frac{rank(i)}{Tot}\]</span></p></li>
</ol>
</section>
<section id="lets-continue-the-example" class="slide level2">
<h2>Lets continue the example:</h2>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">qui</span>:frause smoking, <span class="kw">clear</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>xtset state <span class="fu">year</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="kw">tempfile</span> sc3</span>
<span id="cb7-4"><a href="#cb7-4"></a>** For California</span>
<span id="cb7-5"><a href="#cb7-5"></a>synth cigsale cigsale(1970) cigsale(1975) cigsale(1980) cigsale(1985) cigsale(1988), trunit(3) trperiod(1989) <span class="kw">keep</span>(<span class="ot">`sc3'</span>) <span class="kw">replace</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>** Same Specification <span class="kw">for</span> All other States excluding California</span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="kw">forvalues</span> i =1/39{</span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="kw">if</span> <span class="ot">`i'</span>!=3 {</span>
<span id="cb7-9"><a href="#cb7-9"></a>        <span class="kw">local</span> pool</span>
<span id="cb7-10"><a href="#cb7-10"></a>        <span class="kw">foreach</span> j <span class="kw">of</span> <span class="kw">local</span> stl {</span>
<span id="cb7-11"><a href="#cb7-11"></a>            <span class="kw">if</span> <span class="ot">`j'</span>!=3 &amp; <span class="ot">`j'</span>!=<span class="ot">`i'</span> <span class="kw">local</span> pool <span class="ot">`pool'</span> <span class="ot">`j'</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>        }</span>
<span id="cb7-13"><a href="#cb7-13"></a>        <span class="kw">tempfile</span> sc<span class="ot">`i'</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>        synth cigsale cigsale(1970) cigsale(1975) cigsale(1980) cigsale(1985) cigsale(1988), <span class="co">///</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>        trunit(<span class="ot">`i'</span>) trperiod(1989) <span class="kw">keep</span>(<span class="ot">`sc`i'</span>') <span class="kw">replace</span> counit(<span class="ot">`pool'</span>)</span>
<span id="cb7-16"><a href="#cb7-16"></a>    }</span>
<span id="cb7-17"><a href="#cb7-17"></a>}</span>
<span id="cb7-18"><a href="#cb7-18"></a>** Some <span class="kw">data</span> cleaning and prepration</span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="kw">forvalues</span> i =1/39{</span>
<span id="cb7-20"><a href="#cb7-20"></a>    <span class="kw">use</span> <span class="ot">`sc`i'</span>' , <span class="kw">clear</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>    <span class="kw">gen</span> tef<span class="ot">`i'</span> = _Y_treated - _Y_synthetic</span>
<span id="cb7-22"><a href="#cb7-22"></a>    <span class="kw">egen</span> sef<span class="ot">`i'</span>a =<span class="kw">mean</span>( (_Y_treated - _Y_synthetic)^2) <span class="kw">if</span> _time&lt;=1988</span>
<span id="cb7-23"><a href="#cb7-23"></a>    <span class="kw">egen</span> sef<span class="ot">`i'</span>b =<span class="kw">mean</span>( (_Y_treated - _Y_synthetic)^2) <span class="kw">if</span> _time&gt;1988</span>
<span id="cb7-24"><a href="#cb7-24"></a>  <span class="kw">replace</span> sef<span class="ot">`i'</span>a=<span class="fu">sqrt</span>(sef<span class="ot">`i'</span>a[1])</span>
<span id="cb7-25"><a href="#cb7-25"></a>    <span class="kw">replace</span> sef<span class="ot">`i'</span>b=<span class="fu">sqrt</span>(sef<span class="ot">`i'</span>b[_N])</span>
<span id="cb7-26"><a href="#cb7-26"></a>    <span class="kw">drop</span> <span class="kw">if</span> _time==.</span>
<span id="cb7-27"><a href="#cb7-27"></a>    <span class="kw">keep</span> tef<span class="ot">`i'</span> sef<span class="ot">`i'</span>* _time</span>
<span id="cb7-28"><a href="#cb7-28"></a>    <span class="kw">save</span> <span class="ot">`sc`i'</span>', <span class="kw">replace</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>}</span>
<span id="cb7-30"><a href="#cb7-30"></a>**</span>
<span id="cb7-31"><a href="#cb7-31"></a>** Merging <span class="ot">all</span> together, and getting ready to plot</span>
<span id="cb7-32"><a href="#cb7-32"></a>** </span>
<span id="cb7-33"><a href="#cb7-33"></a></span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="kw">use</span> <span class="ot">`sc1'</span>, <span class="kw">clear</span></span>
<span id="cb7-35"><a href="#cb7-35"></a><span class="kw">forvalues</span> i = 2/39 {</span>
<span id="cb7-36"><a href="#cb7-36"></a>    <span class="kw">merge</span> 1:1 _time <span class="kw">using</span> <span class="ot">`sc`i'</span>', nogen</span>
<span id="cb7-37"><a href="#cb7-37"></a>}</span>
<span id="cb7-38"><a href="#cb7-38"></a><span class="kw">global</span> toplot</span>
<span id="cb7-39"><a href="#cb7-39"></a><span class="kw">global</span> toplot2</span>
<span id="cb7-40"><a href="#cb7-40"></a></span>
<span id="cb7-41"><a href="#cb7-41"></a><span class="kw">forvalues</span> i = 1/39 {</span>
<span id="cb7-42"><a href="#cb7-42"></a>    <span class="kw">global</span> toplot <span class="ot">$toplot</span> (<span class="kw">line</span> tef<span class="ot">`i'</span> _time, <span class="kw">color</span>(gs11) )</span>
<span id="cb7-43"><a href="#cb7-43"></a>  <span class="kw">if</span> (sef<span class="ot">`i'</span>a[1])&lt;(2*sef3a[1]) {</span>
<span id="cb7-44"><a href="#cb7-44"></a>        <span class="kw">global</span> toplot2 <span class="ot">$toplot2</span> (<span class="kw">line</span> tef<span class="ot">`i'</span> _time, <span class="kw">color</span>(gs11) )</span>
<span id="cb7-45"><a href="#cb7-45"></a>    }</span>
<span id="cb7-46"><a href="#cb7-46"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>All Cases</strong></p>

<img data-src="SC_files/figure-revealjs/cell-7-output-1.png" class="r-stretch"></section>
<section id="section-10" class="slide level2">
<h2></h2>
<p><strong>Good Cases</strong> Restricts to States with Good RMSEP (less than 2 California)</p>

<img data-src="SC_files/figure-revealjs/cell-8-output-1.png" class="r-stretch"></section>
<section id="rmse-ratio" class="slide level2">
<h2>RMSE Ratio</h2>

<img data-src="SC_files/figure-revealjs/cell-10-output-1.png" class="r-stretch"></section>
<section id="p-values" class="slide level2">
<h2>p-values</h2>

<img data-src="SC_files/figure-revealjs/cell-12-output-1.png" class="r-stretch"></section>
<section id="other-falsification-tests" class="slide level2">
<h2>Other Falsification Tests</h2>
<ul>
<li>Change of treatment Year.
<ul>
<li>In the manual implementation you may want to change the treatment year (to an earler point). One should see no effect between <em>false</em> treatment date and the true to be zero.</li>
<li>Using <code>synth</code> (Stata) you may want to drop some of the controls, so only “pre-false” treatment data is used.
<ul>
<li>Look also into <code>synth_runner</code></li>
</ul></li>
</ul></li>
<li>Change of Outcome.
<ul>
<li>One can estimate the effect on alternative outcomes. No effect should be estimated.</li>
</ul></li>
</ul>
</section>
<section id="conclusions" class="slide level2">
<h2>Conclusions</h2>
<ul>
<li><p>The basic methodology presented here differs from other strategies because one uses a single treated unit, with pletora of treated groups.</p></li>
<li><p>Instead of comparing single units with the treated group, it aims to compare a weighted average “synthetic control” to do so.</p></li>
<li><p>It will work better than matching because you are focusing on getting the best “weighted” group for a single unit.</p></li>
<li><p>But this methodology is still under development, with extensions toward using dissagregated data, or a combination with DD approaches.</p></li>
<li><p>This may change how much more one can do with the method</p></li>
</ul>
</section>
<section id="section-11" class="title-slide slide level1 center">
<h1></h1>

<img data-src="https://wallpapercave.com/dwp1x/wp8641362.jpg" class="r-stretch"></section>

<section id="next-week" class="title-slide slide level1 center">
<h1>Next week:</h1>
<p>Your papers! And Goodluck Friday</p>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="SC_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="SC_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="SC_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="SC_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="SC_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="SC_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="SC_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="SC_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="SC_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="SC_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1400,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>