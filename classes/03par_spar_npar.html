<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.313">

  <meta name="author" content="Fernando Rios-Avila">
  <title>Econometrics MSC Levy - Semi- and Non- Parametric regression</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <link rel="stylesheet" href="styles.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Semi- and Non- Parametric regression</h1>
  <p class="subtitle">How flexible is flexible enough?</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Fernando Rios-Avila 
</div>
</div>
</div>

</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<p>What exactly do we mean with non parametric??</p>
<ul>
<li><p>First of all, everything we have done in the last class, concerned to the analysis of parametric relationships between <span class="math inline">\(y\)</span> and <span class="math inline">\(X's\)</span> .</p></li>
<li><p>Why parametric? Because we assume that the relationship between those variables is linear, so we just need to estimate the <em>parameters</em> of that relationship. (<span class="math inline">\(\beta's\)</span>). Even tho the CEF was on itself non-parametric.</p></li>
<li><p>This was just a matter of convince. Instead of trying to estimate all possible conditional means (impossible task?) we impose functional form conditions, to identify the relationship of interest.</p></li>
<li><p>When we covered MLE (last semester) we even imposed functional forms assumptions on relationships and distribution!</p></li>
</ul>
</section>
<section id="so-what-about-non-parametric" class="slide level2">
<h2>So what about non-parametric?</h2>
<ul>
<li><p>Non-parametric is on the other side of the spectrum. There are no “single” parameters to estimate, but rather it tries to be as flexible as possible, to identify all possible relationships in the data.</p></li>
<li><p>In terms of distributions, it no longer assumes data distributes as normal, poisson, exponential, etc. Instead, it simply assumes it distributes, however it does. 🤔 But isnt that a problem?</p></li>
<li><p>Yes it can be.</p>
<ul>
<li><p>On the one hand Parametric modeling is very “strict” regarding functional forms. (linear quadratic, logs, etc).</p></li>
<li><p>On the other, Non-parametric can be too flexible. Making the problem almost impossible to solve.</p></li>
</ul></li>
<li><p>However, the benefits of letting your data “speak” for itself, would allow you to avoid some problems with parametric models. At least is some balance can be set on the “flexibility”</p></li>
</ul>
</section>
<section id="ok-but-what-about-semi-parametric" class="slide level2 scrollable">
<h2>Ok but what about Semi-parametric!</h2>
<ul>
<li><p>Semi-parametric models try to establish a mid point between parametric and non-parametric models, attempting to draw from the benefit of both.</p>
<ul>
<li>It also helps that it has a smaller computational burden (we will see what do i mean with this.</li>
</ul></li>
<li><p>What about an example? Say we are trying to explain “wages” as a function of age and education. (assume exogeneity)</p>
<p>Theoretical framework : <span class="math display">\[wage = g(age, education, \varepsilon)
\]</span></p>
<p>Parametric model: <span class="math display">\[wage = b_0 + b_1 age + b_2 education +\varepsilon
\]</span></p>
<p>Non-parametric model: <span class="math display">\[
wage = g(age,education) +\varepsilon
\]</span></p>
<p>Semi-parametric model:</p></li>
</ul>
<p><span class="math display">\[wage = b_0 + g_1(age) + g_2(education) +\varepsilon \\ wage = g_0(age)+b1 education+\varepsilon \\ wage = g_0(age)+g_1 (age)education+\varepsilon
\]</span></p>
</section>
<section id="step1-estimation-of-density-functions" class="slide level2 scrollable">
<h2>Step1: Estimation of Density functions</h2>
<ul>
<li><p>The first step towards learning non-parmetric analysis, is by learning to use the most basic task of all.</p></li>
<li><p><strong>Estimating distributions (PDFs)</strong> : why? in economics, and other social sciences, we care about distributions!</p>
<p>Distribution of income, how many live under poverty, how much is concentrated among the rich, how skew the distribution is, what is the level of inequality, etc, etc</p></li>
<li><p>The parametric approach to estimating distribution, is by using some predefined functional form (say normal), and use the data to estimate the parameters that define that distribution:</p></li>
</ul>
<p><span class="math display">\[
\hat f(x) = \frac{1}{\sqrt{2\pi\hat\sigma^2}}exp \left(-\frac{1}{2}\left(\frac{x-\hat \mu}{\hat \sigma}\right)^2 \right)
\]</span></p>
</section>
<section id="section" class="slide level2">
<h2></h2>
<ul>
<li>Which can be done rather easy in <code>Stata</code></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1"></a>frause oaxaca, <span class="kw">clear</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">drop</span> <span class="kw">if</span> lnwage==.</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">sum</span> lnwage</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">gen</span> f = <span class="fu">normalden</span>(lnwage, <span class="fu">r</span>(<span class="kw">mean</span>), <span class="fu">r</span>(<span class="fu">sd</span>))</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">histogram</span> wages</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<img data-src="resources/pdensity.png" class="r-stretch"><p>But as you can see, it does not fit well.</p>
</section>
<section id="histogram-and-kernel-density" class="slide level2">
<h2>Histogram and Kernel Density</h2>
<p>Histograms and Kernel densities (you probably have used a lot) are a type of non-parametric estimators, because they impose no functional form restrictions to estimate <strong>probability density functions (PDFs).</strong></p>
<p>Construction histograms, is in fact, a fairly Straight forward task:</p>
<ol type="1">
<li>You select the width of bins, <span class="math inline">\(h\)</span> , and starting value <span class="math inline">\(x_0\)</span></li>
</ol>
<p><span class="math display">\[if \ x_i \in [x_0 + m * h, x_0 + (m+1)h ) \rightarrow
bin(x)=m+1
\]</span></p>
<ol start="2" type="1">
<li>And the Histogram estimator for density, is given by:</li>
</ol>
<p><span class="math display">\[\hat f (x) = \frac{1}{nh} \sum_i 1(bin(x)=bin(x_i))
\]</span></p>
<p>Simple yet powerful approach to estimate and visualize distributions. But with lots of room for improvement. It may provide very different pictures based on “h”</p>
</section>
<section id="histograms-with-varying-h" class="slide level2">
<h2>Histograms with Varying h</h2>

<img data-src="resources/hist_1.png" class="r-stretch"></section>
<section id="kernel-density" class="slide level2 scrollable">
<h2>Kernel density</h2>
<p>An alternative that overcomes some of the limitations of the Histogram is known as the kernel density estimator. This is defined as:</p>
<p><span class="math display">\[
\hat f(x) = \frac{1}{nh}\sum_i K\left(\frac{X_i-x}{h}\right)
\]</span></p>
<p>where <span class="math inline">\(K\)</span> is what is known as a kernel function.</p>
<p>This function is such that has the following properties:</p>
<p><span class="math display">\[
\int K(z)dz = 1 ; \int zK(z)dz = 0 ; \int z^2K(z)dz &lt; \infty
\]</span></p>
<p>Is a well behaved pdf on its own, that is symmetric, with defined second moment.</p>
<blockquote>
<p>as with the histogram estimator, the Kden is just an average of functions, that has the advantage of being smooth.</p>
<p>Although it also depends strongly, on the choice of bandwidth.</p>
</blockquote>
</section>
<section id="kernel-density-visualization" class="slide level2 scrollable">
<h2>Kernel density: Visualization</h2>

<img data-src="resources/kden_2.png" class="r-stretch"></section>
<section id="trade-off-bias-vs-variance" class="slide level2 scrollable">
<h2>Trade off: Bias vs variance</h2>
<p>While this estimators are “flexible” in the sense that we impose very simple assumptions for estimation, there is still one parameter that needs attention.</p>
<p>The bandwidth <span class="math inline">\(h\)</span></p>
<p>This does not (or cannot) be estimated, rather, needs to be calibrated to balance two problems in Non-parametric analysis. Bias vs Variance:</p>
<ol type="1">
<li><p>when <span class="math inline">\(h\rightarrow 0\)</span> , the bias of your estimator goes to zero ( in average). Intuitively <span class="math inline">\(\hat f(x)\)</span> is constructed based on information that comes from <span class="math inline">\(x\)</span> alone.</p>
<p>But the variance increases! Because things will vary for every <span class="math inline">\(x\)</span>.</p></li>
<li><p>when <span class="math inline">\(h \rightarrow \infty\)</span> , the bias increases, because you start using data that is very different to <span class="math inline">\(x\)</span> to estimate <span class="math inline">\(\hat f(x)\)</span>.</p>
<p>But variance decreases. Since the “function” is now very smooth (a line?)</p></li>
</ol>
<p>Thus, special attention is needed to choose the right h, which minimizes the problems (bias and variance).</p>
</section>
<section id="kdensity-bias-vs-variance" class="slide level2">
<h2>Kdensity, Bias vs Variance</h2>

<img data-src="resources/kden_3.png" class="r-stretch quarto-figure-center"></section>
<section id="other-considerations" class="slide level2 scrollable">
<h2>Other Considerations</h2>
<ol type="1">
<li>As shown above, one needs to choose the bandwidth <span class="math inline">\(h\)</span> carefully, balancing the bias-variance trade off. Common approach is to simply use rule-of-thumb approaches to select this parameter:</li>
</ol>
<p><span class="math display">\[
h = 1.059 \sigma n ^ {-1/5} \\ h = 1.3643 * d * n ^ {-1/5} * min(\sigma,iqr\sigma)
\]</span></p>
<p>But other approaches may work better.</p>
<ol start="2" type="1">
<li>A second consideration is the choice of Kernel function! (<code>see help kdensity -&gt; kernel</code>)
<ul>
<li>Although, except in few cases, the choice of bandwidth matters more than the kernel function.</li>
</ul></li>
<li>This method works well when your data is smooth and continuous. But for so much for discrete data.
<ul>
<li>Nevertheless, it is still possible to use it with discrete data, and kernel weights!</li>
</ul></li>
<li>Can be “easily” extended to multiple dimensions <span class="math inline">\(f(x,y,z,...)\)</span>, including mixture of continuous and discrete data. You just multiple Kernels!
<ul>
<li>But, beware of Curse of dimensionality.</li>
<li>But still better than just Subsampling!</li>
</ul></li>
</ol>
</section>
<section id="kfunctions" class="slide level2">
<h2>Kfunctions</h2>

<img data-src="resources/image-893322693.png" class="r-stretch"></section>
<section>
<section id="non-parametric-regression" class="title-slide slide level1 center">
<h1>Non-parametric Regression</h1>

<img data-src="resources/smreg_1.png" class="r-stretch"></section>
<section id="np---regression" class="slide level2">
<h2>NP - Regression</h2>
<ul>
<li><p>As hinted from the beginning, the idea of non-parametric regressions is related to estimate a model that is as flexible as it can probably be.</p></li>
<li><p>This relates to the CEF, where we want to estimate a conditional mean for every combination of X’s. In other words, you aim to estimate models that are valid “locally”. A very difficult task.</p>
<ul>
<li>You have a limited sample size</li>
<li>You may not see all possible X’s combinations</li>
<li>and for some, you may have micro-samples (n=1) Can you really do something with this?</li>
</ul></li>
<li><p>Yes, make your model flexible, but not overly flexible! but how?</p>
<ul>
<li>Kernel regression ; Spline regression</li>
<li>Polynomial regression; Smoothed Spline regression.</li>
</ul></li>
</ul>
</section>
<section id="univariate-case" class="slide level2 scrollable">
<h2>Univariate case</h2>
<ul>
<li>Consider a univariate case <span class="math inline">\(y,X\)</span> where you only have 1 indep variable, which are related as follows:</li>
</ul>
<p><span class="math display">\[
y = m(x) + e
\]</span></p>
<p>which imposes the <strong><em>simplifying</em></strong> assumption that error is additive.</p>
<ul>
<li>In the parametric case:</li>
</ul>
<p><span class="math display">\[
y =b_0 + b_1 x + b_2 x^2 +b_3 x^3 +...+e
\]</span></p>
<p>(this is, in fact, starting to become less parametric)</p>
<ul>
<li>But in the full (unconstrained) model it would just be (simple conditional mean:</li>
</ul>
<p><span class="math display">\[
E(y|X) = \hat m(x) = \frac{\sum y_i 1(x_i=x)}{\sum 1(x_i=x)}
\]</span></p>
<p>Problems? Impossible to do out out sample predictions, and if <span class="math inline">\(n&lt;42\)</span> inference would be extremely unreliable.</p>
</section>
<section id="local-constant-regression" class="slide level2 scrollable">
<h2>Local Constant Regression</h2>
<p>We can improve over the Unconstrained mean using the following connection:</p>
<ol type="1">
<li><p><span class="math inline">\(1(x_i=x)\)</span> is a non smooth indicator that shows if an observation is included (counted towards the mean).</p></li>
<li><p>It can be substituted with <span class="math inline">\(K_h(x_i,x)\)</span>, which is the standardized kernel function. (ie <span class="math inline">\(K_h(x_i,x) = \frac{1}{h} K(\frac{x_i-x}{h})\)</span></p>
<p>Depending on <span class="math inline">\(h\)</span> , it gives the most weight the closer <span class="math inline">\(x_i\)</span> is to <span class="math inline">\(x\)</span>.</p>
<p>This gives what is known as the Nadaraya-Watson or Local constant estimator:</p></li>
</ol>
<p><span class="math display">\[
\hat m(x) = \frac{\sum y_i K_h(x_i,x)}{\sum K_h(x_i,x)} = \sum y_i w_i
\]</span></p>
<p>Which, on its core, is simply a weighted regression, with weights given by <span class="math inline">\(\frac{K_h(x_i,x)}{\sum K_h(x_i,x)}\)</span></p>
<ol start="3" type="1">
<li>Kernel Regressions “borrows” info from neighboring observations to obtain a smooth estimator.</li>
</ol>
</section>
<section id="visuals" class="slide level2">
<h2>Visuals</h2>

<img data-src="resources/smreg_2.png" class="r-stretch quarto-figure-center"></section>
<section id="considerations" class="slide level2 scrollable">
<h2>Considerations</h2>
<ol type="1">
<li>Local Constant estimator is simple to estimate with a single variable. And so with multiple variables:</li>
</ol>
<p><span class="math display">\[
\hat m(x,z) = \frac{\sum y_i K_h(x_i,x) \times K_h(z_i,z)}{\sum K_h(x_i,x) \times K_h(z_i,z)}
\]</span></p>
<p>The problem, however, lies on the curse of dimensionality. - More dimensions, less data per <span class="math inline">\((x,z)\)</span> point, unless you “increase” bandwidths.</p>
<ol start="2" type="1">
<li><p>As Before, it all depends on the Bandwidth <span class="math inline">\(h\)</span>.It determines the “flexibility” of the model.</p></li>
<li><p>The local constant tends to have considerable bias (specially near limits of the distribution, or when <span class="math inline">\(g\)</span> has too much curvature)</p></li>
</ol>
</section>
<section id="choosing-h" class="slide level2">
<h2>Choosing h</h2>
<p>The quality of the NPK regression depends strongly on the choice of <span class="math inline">\(h\)</span>. And as with density estimation, the choice translates into a tradeoff between bias and variance of the estimation.</p>
<p>There are various approaches to choose <span class="math inline">\(h\)</span>. Some which depend strongly on the dimensionality of the model.</p>
<p>For Example, <code>Stata</code> command <code>lpoly</code> estimates local constant models, using the following:</p>

<img data-src="resources/image-1628248108.png" width="300" class="r-stretch quarto-figure-center"><p>But that is not the only approach.</p>
<p>An alternative (used for regularization) is using Cross-Validaton. (a method to evaluate the predictive power of a model)</p>
</section>
<section id="cross-validation-intuition" class="slide level2 scrollable">
<h2>Cross Validation: Intuition</h2>
<ol type="1">
<li><p>Separate your data in two parts: Training and testing Sample.</p></li>
<li><p>Estimate your model in the TrainS, and evaluate predictive power in TestS.</p></li>
<li><p>To obtain a full view of predictive power, Repeat the process rotating the training set</p></li>
</ol>
<p><span class="math display">\[
mse = \frac{1}{N}\sum(y_i - g_{-k}(x))^2
\]</span></p>
<p>This should give you a better idea of the predictive power of the model.</p>

<img data-src="resources/image-1717331850.png" width="800" class="r-stretch"></section>
<section id="cross-validation-in-stata" class="slide level2">
<h2>Cross-validation in <code>Stata</code></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1"></a>frause oaxaca, <span class="kw">clear</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">ssc</span> isntall cv_kfold</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">qui</span>:<span class="kw">reg</span> lnwage educ exper tenure female age</span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a>cv_kfold</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="kw">k</span>-fold Cross validation</span>
<span id="cb2-8"><a href="#cb2-8"></a>Number <span class="kw">of</span> Folds     :          5</span>
<span id="cb2-9"><a href="#cb2-9"></a>Number <span class="kw">of</span> Repetions :          1</span>
<span id="cb2-10"><a href="#cb2-10"></a>Avg Root Mean <span class="kw">SE</span>    :    0.45838</span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="kw">qui</span>:<span class="kw">reg</span> lnwage c.(educ exper tenure female age)</span>
<span id="cb2-13"><a href="#cb2-13"></a>               ##c.(educ exper tenure female age)</span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a>cv_kfold</span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="kw">k</span>-fold Cross validation</span>
<span id="cb2-17"><a href="#cb2-17"></a>Number <span class="kw">of</span> Folds     :          5</span>
<span id="cb2-18"><a href="#cb2-18"></a>Number <span class="kw">of</span> Repetions :          1</span>
<span id="cb2-19"><a href="#cb2-19"></a>Avg Root Mean <span class="kw">SE</span>    :    0.42768</span>
<span id="cb2-20"><a href="#cb2-20"></a></span>
<span id="cb2-21"><a href="#cb2-21"></a>. <span class="kw">qui</span>:<span class="kw">reg</span> lnwage c.(educ exper tenure female age)</span>
<span id="cb2-22"><a href="#cb2-22"></a>                 ##c.(educ exper tenure female age)</span>
<span id="cb2-23"><a href="#cb2-23"></a>                 ##c.(educ exper tenure female age)</span>
<span id="cb2-24"><a href="#cb2-24"></a></span>
<span id="cb2-25"><a href="#cb2-25"></a>. cv_kfold</span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="kw">k</span>-fold Cross validation</span>
<span id="cb2-27"><a href="#cb2-27"></a>Number <span class="kw">of</span> Folds     :          5</span>
<span id="cb2-28"><a href="#cb2-28"></a>Number <span class="kw">of</span> Repetions :          1</span>
<span id="cb2-29"><a href="#cb2-29"></a>Avg Root Mean <span class="kw">SE</span>    :    0.43038</span>
<span id="cb2-30"><a href="#cb2-30"></a></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="kw">ssc</span> install cv_regress</span>
<span id="cb2-32"><a href="#cb2-32"></a>* Does lOOCV <span class="kw">for</span> regression</span>
<span id="cb2-33"><a href="#cb2-33"></a>cv_regress</span>
<span id="cb2-34"><a href="#cb2-34"></a></span>
<span id="cb2-35"><a href="#cb2-35"></a>Leave-One-Out Cross-Validation Results </span>
<span id="cb2-36"><a href="#cb2-36"></a>-----------------------------------------</span>
<span id="cb2-37"><a href="#cb2-37"></a>         Method          |    Value</span>
<span id="cb2-38"><a href="#cb2-38"></a>-------------------------+---------------</span>
<span id="cb2-39"><a href="#cb2-39"></a>Root Mean Squared Errors |       0.4244</span>
<span id="cb2-40"><a href="#cb2-40"></a>Log Mean Squared Errors  |      -1.7144</span>
<span id="cb2-41"><a href="#cb2-41"></a>Mean Absolute Errors     |       0.2895</span>
<span id="cb2-42"><a href="#cb2-42"></a>Pseudo-R2                |      0.36344</span>
<span id="cb2-43"><a href="#cb2-43"></a>-----------------------------------------</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="loocv" class="slide level2 scrollable">
<h2>LOOCV</h2>
<p>Because the “choice” of “folds” and Repetitions, and the randomness, may produce different results every-time, one also has the option of using the “leave-one-out” approach.</p>
<p>This means, leave one observation out, and use the rest to make the predictions.</p>
<p><span class="math display">\[
CV(h) = n^{-1}\sum_{i=1}^n(y_i - \hat g_{-i}(x_i))^2
\]</span></p>
<p>This is not as bad as it looks, since we can use the shortcut</p>
<p><span class="math display">\[
CV(h) = n^{-1}\sum_{i=1}^n\left(\frac{y_i - \hat g(x_i)}{1-w_i/\Sigma w_j}\right)^2
\]</span></p>
<p>In <code>Stata</code>, the command <code>npregress kernel</code> uses this type of cross-validation to determine “optimal” <span class="math inline">\(h\)</span></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1"></a>lpoly <span class="fu">y</span> x, kernel(gaussian) <span class="bn">nodraw</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">display</span> <span class="fu">r</span>(bwidth)</span>
<span id="cb3-3"><a href="#cb3-3"></a>.23992564</span>
<span id="cb3-4"><a href="#cb3-4"></a>npregress kernel <span class="fu">y</span> x, estimator(constant) noderiv</span>
<span id="cb3-5"><a href="#cb3-5"></a>. Bandwidth</span>
<span id="cb3-6"><a href="#cb3-6"></a>-------------------------</span>
<span id="cb3-7"><a href="#cb3-7"></a>             |      Mean </span>
<span id="cb3-8"><a href="#cb3-8"></a>-------------+-----------</span>
<span id="cb3-9"><a href="#cb3-9"></a>           x |  .4064052 </span>
<span id="cb3-10"><a href="#cb3-10"></a>-------------------------</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extending-from-constant-to-polynomial" class="slide level2 scrollable">
<h2>Extending from constant to Polynomial</h2>
<p>An alternative way to understanding the simple NW (local constant) regressions, is to understand it as a local regression model with anything but a constant:</p>
<p><span class="math display">\[
\hat m(x)=min\sum(y_i - \beta_0)^2 w(x,h)_i
\]</span></p>
<p>This means that you could extend the analogy and include “centered” polynomials to the model.</p>
<p><span class="math display">\[
\begin{aligned}
min &amp;\sum(y_i - \beta_0 - \beta_1 (x_i -x) -\beta_2 (x_i - x) ^2 - ...-\beta_k(x_i-x)^k)^2 w(x,h)_i \\
\hat m(x) &amp;= \hat \beta_0
\end{aligned}
\]</span></p>
<p>This is called the local polynomial regression.</p>
<ul>
<li><p>Because its more flexible, it shows less bias when the true function shows a lot of variation.</p></li>
<li><p>Because of added polynomials, it requires more information (larger <span class="math inline">\(h\)</span>)</p></li>
<li><p>It can be used to easily obtain local marginal effects.</p></li>
<li><p>And can also be used with multinomial models (local planes)</p></li>
</ul>
<p><span class="math display">\[min \sum (y_i - \beta_0 - \beta_1 (x_i-x) - \beta_2 (z_i-z))^2 w(x,z,h)
\]</span></p>
</section>
<section id="local-constant-to-local-polynomial" class="slide level2 scrollable">
<h2>Local Constant to Local Polynomial</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">webuse</span> motorcycle</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw">two</span> <span class="kw">scatter</span> accel time || <span class="co">///</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>lpoly accel time , degree(0) n(100) || <span class="co">///</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>lpoly accel time , degree(1) n(100) || <span class="co">///</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>lpoly accel time , degree(2) n(100) || <span class="co">///</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>lpoly accel time , degree(3) n(100) , <span class="co">///</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="bn">legend</span>(<span class="kw">order</span>(2 <span class="st">"LConstant"</span> 3 <span class="st">"Local Linear"</span> <span class="co">///</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>4 <span class="st">"Local Cubic"</span> 5 <span class="st">"Local Quartic"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<p><img data-src="resources/lllreg.png"></p>
</div>
</div>
</section>
<section id="statistical-inference" class="slide level2 scrollable">
<h2>Statistical Inference</h2>
<p>For Statistical Inference, since each regression is just a linear model, standard errors can be obtained using the criteria as in Lecture 1. (Robust, Clustered, bootstrapped).</p>
<ul>
<li>With perhaps one caveat. Local estimation and standard errors may need to be estimated “globally”, rather than locally.</li>
</ul>
<p>The estimation of marginal effects becomes a bit more problematic.</p>
<ul>
<li><p>Local marginal effects are straightforward (when local linear or higher local polynomial is used)</p></li>
<li><p>Global marginal effects, can be obtained averaging all local marginal effects.</p></li>
<li><p>However, asymptotic standard errors are difficult to obtain (consider the multiple correlated components), but bootstrapping is still possible.</p></li>
</ul>
</section>
<section id="stata-example" class="slide level2">
<h2><code>Stata</code> Example</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1"></a>frause oaxaca</span>
<span id="cb5-2"><a href="#cb5-2"></a>npregress kernel lnwage age exper</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>Computing <span class="kw">mean</span> <span class="kw">function</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  </span>
<span id="cb5-6"><a href="#cb5-6"></a>Minimizing <span class="kw">cross</span>-validation <span class="kw">function</span>:</span>
<span id="cb5-7"><a href="#cb5-7"></a>  </span>
<span id="cb5-8"><a href="#cb5-8"></a>Iteration 0:   Cross-validation criterion = -1.5904753  </span>
<span id="cb5-9"><a href="#cb5-9"></a>Iteration 1:   Cross-validation criterion = -1.5906158  </span>
<span id="cb5-10"><a href="#cb5-10"></a>Iteration 2:   Cross-validation criterion = -1.5907243  </span>
<span id="cb5-11"><a href="#cb5-11"></a>Iteration 3:   Cross-validation criterion = -1.5911389  </span>
<span id="cb5-12"><a href="#cb5-12"></a>Iteration 4:   Cross-validation criterion = -1.5911389  </span>
<span id="cb5-13"><a href="#cb5-13"></a>Iteration 5:   Cross-validation criterion = -1.5911855  </span>
<span id="cb5-14"><a href="#cb5-14"></a>Iteration 6:   Cross-validation criterion = -1.5912075  </span>
<span id="cb5-15"><a href="#cb5-15"></a>  </span>
<span id="cb5-16"><a href="#cb5-16"></a>Computing optimal derivative bandwidth</span>
<span id="cb5-17"><a href="#cb5-17"></a>  </span>
<span id="cb5-18"><a href="#cb5-18"></a>Iteration 0:   Cross-validation criterion =  .01378252  </span>
<span id="cb5-19"><a href="#cb5-19"></a>Iteration 1:   Cross-validation criterion =   .0019967  </span>
<span id="cb5-20"><a href="#cb5-20"></a>Iteration 2:   Cross-validation criterion =  .00196967  </span>
<span id="cb5-21"><a href="#cb5-21"></a>Iteration 3:   Cross-validation criterion =  .00196371  </span>
<span id="cb5-22"><a href="#cb5-22"></a></span>
<span id="cb5-23"><a href="#cb5-23"></a>Bandwidth</span>
<span id="cb5-24"><a href="#cb5-24"></a>------------------------------------</span>
<span id="cb5-25"><a href="#cb5-25"></a>             |      Mean     Effect </span>
<span id="cb5-26"><a href="#cb5-26"></a>-------------+----------------------</span>
<span id="cb5-27"><a href="#cb5-27"></a>         age |  2.843778   15.10978 </span>
<span id="cb5-28"><a href="#cb5-28"></a>       exper |  3.113587   16.54335 </span>
<span id="cb5-29"><a href="#cb5-29"></a>------------------------------------</span>
<span id="cb5-30"><a href="#cb5-30"></a></span>
<span id="cb5-31"><a href="#cb5-31"></a>Local-linear regression                    Number <span class="kw">of</span> <span class="kw">obs</span>      =          1,434</span>
<span id="cb5-32"><a href="#cb5-32"></a>Kernel   : epanechnikov                    E(Kernel <span class="kw">obs</span>)      =          1,434</span>
<span id="cb5-33"><a href="#cb5-33"></a>Bandwidth: <span class="kw">cross</span>-validation                R-squared          =         0.3099</span>
<span id="cb5-34"><a href="#cb5-34"></a>------------------------------------------------------------------------------</span>
<span id="cb5-35"><a href="#cb5-35"></a>      lnwage |   Estimate</span>
<span id="cb5-36"><a href="#cb5-36"></a>-------------+----------------------------------------------------------------</span>
<span id="cb5-37"><a href="#cb5-37"></a>Mean         |</span>
<span id="cb5-38"><a href="#cb5-38"></a>      lnwage |   3.339269</span>
<span id="cb5-39"><a href="#cb5-39"></a>-------------+----------------------------------------------------------------</span>
<span id="cb5-40"><a href="#cb5-40"></a>Effect       |</span>
<span id="cb5-41"><a href="#cb5-41"></a>         age |   .0169326</span>
<span id="cb5-42"><a href="#cb5-42"></a>       exper |  -.0010196</span>
<span id="cb5-43"><a href="#cb5-43"></a>------------------------------------------------------------------------------</span>
<span id="cb5-44"><a href="#cb5-44"></a>Note: Effect <span class="kw">estimates</span> are averages <span class="kw">of</span> derivatives.</span>
<span id="cb5-45"><a href="#cb5-45"></a>Note: You may compute standard errors <span class="kw">using</span> <span class="kw">vce</span>(<span class="kw">bootstrap</span>) <span class="kw">or</span> reps().</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="other-types-of-non-parametric-models" class="slide level2">
<h2>Other types of “non-parametric” models</h2>
<p>We have explored the basic version of <strong>non-parametric</strong> modeling. But its not the only one.</p>
<p>There are at least two others that are <em>easy</em> to implement.</p>
<ol type="1">
<li>Nonparametric Series Regression (we will see this)</li>
<li>Smoothing series/splines: Which borrows from Series regression and Ridge Regression.</li>
</ol>
</section>
<section id="non-parametric-series" class="slide level2 scrollable">
<h2>Non-parametric series</h2>
<p>This approach assumes that model flexibility can achieve by using “basis” functions in combination with Interactions, but using “global” regressions (OLS)</p>
<p>But what are “basis” functions? They are a collection of terms that approximates smooth functions arbitrarily well.</p>
<p><span class="math display">\[
\begin{aligned}
y &amp;= m(x,z)+e  \\
m(x,z)  &amp;= B(x)+ B(z)+B(x)*B(z)  \\
B(x)  &amp;= (x, x^2, x^3,...) \\
B(x)  &amp; = fracPoly \\
B(x)  &amp;= (x, max(0,x-c_1), max(0,x-c_2), ... \\
B(x)  &amp;= (x,x^2,max(0,x-c_1)^2, max(0,x-c_2)^2, ... \\
B(x)  &amp;= B-splines
\end{aligned}
\]</span></p>
<ul>
<li><p>Polynomials can be used, but there may be problems with high order polynomials. (<em>Runge’s phenomenon,multiple-co-linearity</em>). They are “global” estimators.</p></li>
<li><p>Fractional polynomials: More flexible than polynomials, without producing “waves” on the predictions</p></li>
<li><p>Natural Splines, are better at capturing smooth transitions (depending on degree). Require choosing Knots appropriately.</p></li>
<li><p>B-splines are similar to N-splines, but with better stat properties. Also require choosing knots</p></li>
</ul>
<p>Except for correctly estimating the Bases functions (fracpoly and Bsplines are not straight forward), estimation requires simple OLS.</p>
</section>
<section id="np-series---tuning" class="slide level2">
<h2>NP series - tuning</h2>
<ul>
<li><p>While NP-series are easy to estimate, we also need to address problems of over-fitting.</p></li>
<li><p>With Polynomial: What degree of polynomial is correct? What about the degree of the interactions?</p></li>
<li><p>Fractional Polynomials: How many terms are needed, what would their “degrees” be.</p></li>
<li><p>Nsplines, Bsplines: How to choose degree? and where to set the knots?</p></li>
</ul>
<p>These questions are similar to the choosing <span class="math inline">\(h\)</span> in kernel regressions. However, model choice is simple…Cross validation.</p>
<blockquote>
<p>Estimate a model under different specifications (cut offs), and compare the out-of-sample predictive power. (<code>see Stata: cv_kfold or cv_regress</code>)</p>
</blockquote>
<p>One more problem left. Statistical Inference</p>
</section>
<section id="np-series---se-and-mfx" class="slide level2 scrollable">
<h2>NP series - SE and Mfx</h2>
<p>Lecture 1 applies here. Once the model has been chosen, you can estimate SE using appropriate methods. There is only one caveat</p>
<ul>
<li>Standard SE estimation ignores the uncertainty of choosing cut-offs or polynomial degrees. In principle, cut-offs uncertainty can be modeled. But requires non-linear estimation.</li>
</ul>
<p>Marginal effects are somewhat easier for some basis. Just take derivatives:</p>
<p><span class="math display">\[
y = b_0 + b_1 x + b_2 x^2 +b_3 max(0,x-c)^2 + e \\
\frac{dy}{dx}=b_1 + 2 b_2 x + 2 b_3 (x-c) 1(x&gt;c)
\]</span></p>
<ul>
<li>But keeping track of derivatives in a multivariate model is difficult, and often, the functions are hard to track down. so how to implement it?</li>
</ul>
</section>
<section id="np-series-implementation-marginal-effects" class="slide level2 scrollable">
<h2>NP series: Implementation marginal effects</h2>
<p>As always, it all depends on how are the models estimated.</p>
<ul>
<li><p><code>Stata</code> command <code>npregress series</code> allows you to estimate this type of models using polynomials, splines and B-splines. And also allows estimates marginal effects for you. (can be slow)</p></li>
<li><p><code>fp</code> estimates fractional polynomials, but does not estimate marginal effects for you.</p></li>
<li><p><code>R</code> is a bit more flexible in terms of tracking down functions as variables (<code>~x+I(x*x)+ln(x)</code>). So it may be “easy” to estimate those effects.</p></li>
<li><p>In <code>Stata</code>, you can use the package <code>f_able</code> to estimate those marginal effects, however. see <a href="https://journals.sagepub.com/doi/pdf/10.1177/1536867X211000005">here</a> for details. and <code>SSC</code> for the latest update.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1"></a>frause oaxaca, <span class="kw">clear</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw">drop</span> agesq</span>
<span id="cb6-3"><a href="#cb6-3"></a>f_spline age = age, nk(1) degree(3)</span>
<span id="cb6-4"><a href="#cb6-4"></a>f_spline exper = exper, nk(1) degree(3)</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="kw">qui</span>:<span class="kw">regress</span> lnwage c.(age*)##c.(exper*)</span>
<span id="cb6-6"><a href="#cb6-6"></a>f_able age? exper?, auto </span>
<span id="cb6-7"><a href="#cb6-7"></a>margins, <span class="kw">dydx</span>(age exper) noestimcheck </span>
<span id="cb6-8"><a href="#cb6-8"></a></span>
<span id="cb6-9"><a href="#cb6-9"></a>------------------------------------------------------------------------------</span>
<span id="cb6-10"><a href="#cb6-10"></a>             |            Delta-method</span>
<span id="cb6-11"><a href="#cb6-11"></a>             |      dy/dx   <span class="fu">std</span>. err.      z    P&gt;|z|     [95% conf. interval]</span>
<span id="cb6-12"><a href="#cb6-12"></a>-------------+----------------------------------------------------------------</span>
<span id="cb6-13"><a href="#cb6-13"></a>         age |   .0360234   .0033909    10.62   0.000     .0293775    .0426694</span>
<span id="cb6-14"><a href="#cb6-14"></a>       exper |   .0082594   .0050073     1.65   0.099    -.0015547    .0180735</span>
<span id="cb6-15"><a href="#cb6-15"></a>------------------------------------------------------------------------------</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="semiparametric-regressions" class="slide level2">
<h2>Semiparametric Regressions</h2>
<ul>
<li><p>Full non-parametric estimations are powerful to identify very flexible functional forms. To avoid overfitting, however, one must choose tuning parameters appropriately (<span class="math inline">\(h\)</span> and <span class="math inline">\(cutoffs\)</span> ).</p></li>
<li><p>A disadvantage: Curse of dimensionality. More variables need more data to provide good results. But, the more data you have, the more difficult to estimate (computing time).</p></li>
<li><p>It also becomes extremly difficult to interpret. (too much flexibility)</p></li>
<li><p>An alternative, Use the best of both worlds: Semiparametric regression</p>
<ul>
<li>Flexiblity when needed with the structure of standard regressions, to avoid the downfalls of fully nonparametric models</li>
</ul></li>
</ul>
</section>
<section id="partially-linear-model" class="slide level2 scrollable">
<h2>Partially Linear model</h2>
<p><span class="math display">\[
y = x\beta +g(z) +e
\]</span></p>
<p>This model assumes that only a smaller set of covariates need to be estimated non-parametrically in the model.</p>
<p>Estimators:</p>
<ul>
<li><p><code>npregress series</code>: Use BasisF to estimate <span class="math inline">\(g(z)\)</span> . Or other series regressions, fractional polynomial <code>fp</code></p></li>
<li><p>Yatchew 1997: For a single z, sort variables by it, and estimate: <span class="math inline">\(\Delta y=\Delta X\beta+ \Delta g(z) + \Delta e\)</span>. This works because <span class="math inline">\(\Delta g(z)\rightarrow 0\)</span></p>
<p>Estimate <span class="math inline">\(g(z)\)</span> regressing <span class="math inline">\(y-x\hat \beta\)</span> on <span class="math inline">\(z\)</span>. See <a href="https://journals.sagepub.com/doi/pdf/10.1177/1536867X0600600306">plreg</a></p></li>
<li><p>Robinson 1988: Application of FWL. Estimate <span class="math inline">\(y = g_y(z)+e_y\)</span> and <span class="math inline">\(x = g_x(z)+e_x\)</span> and estimate <span class="math inline">\(\beta = (e_x ' e_x)^{-1} e_x ' e_y\)</span> . For <span class="math inline">\(g(z)\)</span> same as before. See <a href="https://journals.sagepub.com/doi/pdf/10.1177/1536867X1201200411">semipar</a>.</p></li>
<li><p>Other methods available see <a href="https://www.stata.com/meeting/uk13/abstracts/materials/uk13_verardi.pdf">semi_stata</a></p></li>
</ul>
</section>
<section id="generalized-additive-model" class="slide level2">
<h2>Generalized Additive model</h2>
<p><span class="math display">\[
y = g(x) +g(z)+e
\]</span></p>
<p>This model assumes the effect of X and Z (or any other variables) are additive separable, and may have a nonlinear effect on y.</p>
<ul>
<li><p><code>npregress series</code>: with non-interaction option. Fractional polynomials <code>mfp</code>, cubic splines <code>mvrs</code> (see <a href="https://journals.sagepub.com/doi/pdf/10.1177/1536867X0700700103">mvrs</a>) , or manual implementation.</p></li>
<li><p>Kernel regression possible. (as in Robinson 1988), but requires an iterative method. (back fitting algorithm)</p>
<ul>
<li><span class="math inline">\(g(x) = smooth (y-g(z)|x)\)</span>, center <span class="math inline">\(g(x)\)</span> , and <span class="math inline">\(g(z) = smooth (y-g(x)|z)\)</span>, center <span class="math inline">\(g(z)\)</span> until convergence</li>
</ul></li>
<li><p>In general, it can be easy to apply, but extra work required for marginal effects.</p></li>
</ul>
</section>
<section id="smooth-coefficient-model" class="slide level2">
<h2>Smooth Coefficient model</h2>
<p><span class="math display">\[
y = g_0(z)+g_1(z)x + e
\]</span></p>
<p>This model assumes that <span class="math inline">\(X's\)</span> have a locally linear effect on $y$, but that effect varies across values of <span class="math inline">\(z\)</span>, in a non-parametric way.</p>
<ul>
<li><p><code>fp</code> or manual implementation of basis functions, with interaction. May allow for multiple variables in <span class="math inline">\(z\)</span></p></li>
<li><p>One can also use Local Kernel regressions. locally weighted regression where All X variables are considered fixed, or interacted with polynomials of Z. Choice of bandwidth problematic, but doable (LOOCV).</p>
<p><a href="https://journals.sagepub.com/doi/abs/10.1177/1536867X20953574">vc_pack</a> can estimate this models with a single z, as well as test it. Overall marginal effects still difficult to obtain.</p></li>
</ul>
</section>
<section id="example" class="slide level2">
<h2>Example</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1"></a></span>
<span id="cb7-2"><a href="#cb7-2"></a>frause oaxaca</span>
<span id="cb7-3"><a href="#cb7-3"></a>npregress kernel lnwage age exper</span>
<span id="cb7-4"><a href="#cb7-4"></a>margins, <span class="kw">dydx</span>(*)</span>
<span id="cb7-5"><a href="#cb7-5"></a></span>
<span id="cb7-6"><a href="#cb7-6"></a>vc_bw lnwage educ exper tenure female married divorced, vcoeff(age)</span>
<span id="cb7-7"><a href="#cb7-7"></a>vc_reg lnwage educ exper tenure female married divorced, vcoeff(age) <span class="kw">k</span>(20)</span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="kw">ssc</span> install <span class="bn">addplot</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>vc_graph educ exper tenure female married divorced, rarea</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="bn">addplot</span> grph1:, <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">title</span>(Education)</span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="bn">addplot</span> grph2:, <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">title</span>(Experience)</span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="bn">addplot</span> grph3:, <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">title</span>(Tenure)</span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="bn">addplot</span> grph4:, <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">title</span>(Female)</span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="bn">addplot</span> grph5:, <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">title</span>(Married)</span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="bn">addplot</span> grph6:, <span class="bn">legend</span>(<span class="kw">off</span>) <span class="bn">title</span>(Divorced)</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="kw">graph</span> <span class="bn">combine</span> grph1 grph2 grph3 grph4 grph5 grph6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="example-1" class="slide level2">
<h2>Example</h2>

<img data-src="resources/vc_plot.png" class="r-stretch quarto-figure-center"><p class="caption">Wage Profile across years</p></section></section>
<section id="the-end-next-time-quantile-regressions" class="title-slide slide level1 center">
<h1>The end: Next time Quantile regressions</h1>

<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1500,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>